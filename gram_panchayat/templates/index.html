{% extends 'layout.html' %}
{% load static %}

{% block title %}
  Online Gram Panchayat
{% endblock %}

{% block content %}
  <!-- TAILWIND SLIDER (no external lib) -->
  <section class="w-full select-none">
    <div id="tp-slider" class="relative group">
      <!-- Viewport -->
      <div class="overflow-hidden">
        <!-- Track -->  
        <div class="flex transition-transform duration-500 ease-out" data-track>
          <!-- Slides -->
          <div class="min-w-full h-56 md:h-96 lg:h-[500px] xl:h-[600px]">
            <img src="{% static 'images/1.jpg' %}" class="w-full h-full object-cover" alt="Slide 1" />
          </div>
          <div class="min-w-full h-56 md:h-96 lg:h-[500px] xl:h-[600px]">
            <img src="{% static 'images/2.jpg' %}" class="w-full h-full object-cover" alt="Slide 2" />
          </div>
          <div class="min-w-full h-56 md:h-96 lg:h-[500px] xl:h-[600px]">
            <img src="{% static 'images/3.jpg' %}" class="w-full h-full object-cover" alt="Slide 3" />
          </div>
          <div class="min-w-full h-56 md:h-96 lg:h-[500px] xl:h-[600px]">
            <img src="{% static 'images/4.jpg' %}" class="w-full h-full object-cover" alt="Slide 4" />
          </div>
          <div class="min-w-full h-56 md:h-96 lg:h-[500px] xl:h-[600px]">
            <img src="{% static 'images/5.jpg' %}" class="w-full h-full object-cover" alt="Slide 5" />
          </div>
        </div>
      </div>

      <!-- Prev / Next -->
      <button type="button" class="absolute left-3 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition focus:opacity-100 inline-flex items-center justify-center h-10 w-10 rounded-full bg-white/80 shadow hover:bg-white" aria-label="Previous slide" data-prev>
        <!-- left icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 19-7-7 7-7" />
        </svg>
      </button>

      <button type="button" class="absolute right-3 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition focus:opacity-100 inline-flex items-center justify-center h-10 w-10 rounded-full bg-white/80 shadow hover:bg-white" aria-label="Next slide" data-next>
        <!-- right icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 5 7 7-7 7" />
        </svg>
      </button>

      <!-- Dots -->
      <div class="absolute left-0 right-0 bottom-3 flex items-center justify-center gap-2" data-dots></div>
    </div>
  </section>

  <div class="container m-auto">
    <!-- Welcome Section -->
    <h2 class="text-black text-2xl md:text-3xl font-bold text-center mt-12">WELCOME TO FOJIVADA GRAM PANCHAYAT</h2>

    <div class="flex flex-col md:flex-row items-center justify-between gap-8 mt-10 px-6 md:px-16">
      <!-- Left Map -->
      <div class="w-full md:w-1/2 flex justify-center">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7318.3911245800155!2d73.0668116953769!3d23.489464555196093!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x395dc1f8ca48eddf%3A0x362739a758669d5!2sFojivada%2C%20Gujarat!5e0!3m2!1sen!2sin!4v1756570427316!5m2!1sen!2sin" class="w-[90%] h-[300px] md:h-[400px] rounded-lg shadow-md" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
      </div>

      <!-- Right Text -->
      <div class="w-full md:w-1/2 flex flex-col space-y-6">
        <p class="text-gray-700 leading-relaxed">Our Gram Panchayat is dedicated to building a stronger, smarter, and more connected village community. We aim to bring governance closer to the people by making essential services and information available online.</p>
        <a href="#" class="px-4 py-2 w-fit border border-gray-700 rounded-lg text-gray-700 hover:bg-gray-700 hover:text-white transition duration-700">Learn More...</a>
      </div>
    </div>
  </div>

  <!-- Services Section -->
  <div class="mt-16 px-6 md:px-16 text-black">
    <h2 class="text-center text-2xl md:text-3xl font-bold mb-10">Our Services</h2>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
      <!-- Service 1 -->
      <div class="p-6 bg-white shadow-md rounded-xl hover:shadow-lg transition">
        <div class="w-20 h-20 mx-auto flex items-center justify-center bg-blue-600 text-white rounded-full mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
            <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
          </svg>
        </div>
        <h3 class="font-semibold"><a href="#">Village Development Projects</a></h3>
      </div>

      <!-- Service 2 -->
      <div class="p-6 bg-white shadow-md rounded-xl hover:shadow-lg transition">
        <div class="w-20 h-20 mx-auto flex items-center justify-center bg-green-600 text-white rounded-full mb-4">
         <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-chat-square-text-fill" viewBox="0 0 16 16">
            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z"/>
        </svg>
        </div>
        <h3 class="font-semibold"><a href="{% url 'complain' %}">Grievance / Complaint</a></h3>
      </div>

      <!-- Service 3 -->
      <div class="p-6 bg-white shadow-md rounded-xl hover:shadow-lg transition">
        <div class="w-20 h-20 mx-auto flex items-center justify-center bg-yellow-600 text-white rounded-full mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" fill="currentColor" viewBox="0 0 16 16">
            <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4z" />
          </svg>
        </div>
        <h3 class="font-semibold"><a href="#">Pay Property / Water Tax</a></h3>
      </div>
    </div>
  </div>

  <!-- Recent Work -->
  <div class="mt-16 px-6 md:px-16">
    <h3 class="text-2xl font-bold mb-8">Recent Work</h3>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <!-- Work item -->
      <div class="relative group overflow-hidden rounded-lg shadow-md">
        <img src="{% static 'images/img/portfolio/thumb-1.jpg' %}" alt="" class="w-full h-64 object-cover group-hover:scale-105 transition-transform" />
        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white transition">
          <div>
            <h3 class="text-lg font-semibold">Hey this is as</h3>
            <p class="text-sm">Illustration, 3d</p>
          </div>
        </div>
      </div>

      <div class="relative group overflow-hidden rounded-lg shadow-md">
        <img src="{% static 'images/img/portfolio/thumb-2.jpg' %}" alt="" class="w-full h-64 object-cover group-hover:scale-105 transition-transform" />
        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white transition">
          <div>
            <h3 class="text-lg font-semibold">Apple Creative</h3>
            <p class="text-sm">Illustration, 3d</p>
          </div>
        </div>
      </div>

      <div class="relative group overflow-hidden rounded-lg shadow-md">
        <img src="{% static 'images/img/portfolio/thumb-3.jpg' %}" alt="" class="w-full h-64 object-cover group-hover:scale-105 transition-transform" />
        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white transition">
          <div>
            <h3 class="text-lg font-semibold">Apple Creative</h3>
            <p class="text-sm">Illustration, 3d</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    ;(() => {
      const root = document.getElementById('tp-slider')
      const track = root.querySelector('[data-track]')
      const slides = Array.from(track.children)
      const btnPrev = root.querySelector('[data-prev]')
      const btnNext = root.querySelector('[data-next]')
      const dotsWrap = root.querySelector('[data-dots]')
    
      let index = 0
      let autoplayId = null
      const interval = 4000 // 4s
    
      // Build dots
      slides.forEach((_, i) => {
        const b = document.createElement('button')
        b.type = 'button'
        b.className = 'h-2.5 w-2.5 rounded-full bg-white/60 hover:bg-white shadow ring-1 ring-black/10'
        b.setAttribute('aria-label', `Go to slide ${i + 1}`)
        b.addEventListener('click', () => goTo(i))
        dotsWrap.appendChild(b)
      })
    
      const dots = Array.from(dotsWrap.children)
    
      function updateUI() {
        track.style.transform = `translateX(-${index * 100}%)`
        dots.forEach((d, i) => {
          d.classList.toggle('w-6', i === index)
          d.classList.toggle('bg-white', i === index)
          d.classList.toggle('bg-white/60', i !== index)
        })
      }
    
      function goTo(i) {
        index = (i + slides.length) % slides.length
        updateUI()
      }
    
      function next() {
        goTo(index + 1)
      }
      function prev() {
        goTo(index - 1)
      }
    
      // Buttons
      btnNext.addEventListener('click', next)
      btnPrev.addEventListener('click', prev)
    
      // Autoplay
      function start() {
        autoplayId = setInterval(next, interval)
      }
      function stop() {
        clearInterval(autoplayId)
        autoplayId = null
      }
    
      root.addEventListener('mouseenter', stop)
      root.addEventListener('mouseleave', () => {
        if (!autoplayId) start()
      })
    
      // Keyboard
      root.setAttribute('tabindex', '0')
      root.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') next()
        if (e.key === 'ArrowLeft') prev()
      })
    
      // Touch swipe
      let startX = 0,
        isTouch = false
      track.addEventListener(
        'touchstart',
        (e) => {
          isTouch = true
          startX = e.touches[0].clientX
          stop()
        },
        { passive: true }
      )
    
      track.addEventListener(
        'touchmove',
        (e) => {
          if (!isTouch) return
          const dx = e.touches[0].clientX - startX
          // optional: could implement drag preview; keeping simple
        },
        { passive: true }
      )
    
      track.addEventListener('touchend', (e) => {
        if (!isTouch) return
        const endX = e.changedTouches[0].clientX
        const dx = endX - startX
        const threshold = 40 // px
        if (dx > threshold) prev()
        else if (dx < -threshold) next()
        isTouch = false
        start()
      })
    
      // Init
      updateUI()
      start()
    })()
  </script>
{% endblock %}
